<!DOCTYPE html>
<html>
  <head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Autocomplete Word Lookup like a Boss!</title>

  </head>

  <body>

    <div id="main">

      <h1>Crossword Destroyer!</h1>
      <input id="plus-button" type="button" value="Plus">
      <input id="minus-button" type="button" value="Minus">
      <p></p>
      <div id="inputBoxes">
        <input maxlength="1" size="1" type="text" class="inputs" id="search1">
        <input maxlength="1" size="1" type="text" class="inputs" id="search2">
        <input maxlength="1" size="1" type="text" class="inputs" id="search3">
        <input maxlength="1" size="1" type="text" class="inputs" id="search4">
        <input maxlength="1" size="1" type="text" class="inputs" id="search5">
        <input maxlength="1" size="1" type="text" class="inputs" id="search6">
      </div>

      <div id="results"></div>
    </div>

  <style>

    body {
      min-height: 100%;
      height: 100%
    }

    #main {
      height: 30%;
    }

    #quint {
      height: 70%;
      bottom: 0;
      position: fixed;
    }

  </style>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/qunit/qunit-1.18.0.css">
  <script src="https://code.jquery.com/qunit/qunit-1.18.0.js"></script>

  <script>
    var boxes;
    $('#plus-button').click(function() {
      boxes = $("#inputBoxes > input").length;
      if(boxes < 15) {
        $("#inputBoxes").append(
          '<input maxlength="1" size="1" type="text" class="inputs" id="search' + (boxes + 1) + '">'
        )
      }
    });

    $('#minus-button').click(function() {
      boxes = $("#inputBoxes > input").length;
      if(boxes > 2) {
        $("#inputBoxes input:last-child").remove()
        // console.log($("#inputBoxes input:last-child").val());
      }
    });

    $('body').on('keyup','.inputs', function() {
      boxes = $("#inputBoxes > input").length;
      var arr = [];
      var live = false;
      for(var i = 1; i <= boxes; i++) {
        var x = document.getElementById('search' + i).value;
        if(x.length > 0) {
          arr.push(x.toLowerCase());
          live = true;
        } else {
          arr.push('_');
        }
      }

      var scrab = arr.join('');

      if (!live) {
        $('#results').html("<p>Enter some letters!</p>");
      } else {
        $.get('/' + scrab, function handler(data) {
          data = data.split(',');
          var results = '';
          for(var i = 0; i < data.length; i++) {
            results += "<p> " + data[i] + "</p>";
          }
          $('#results').html(results);
        });
      }
      //$('#results').html(new Date().getTime());
    });
  </script>

  </body>
</html>
